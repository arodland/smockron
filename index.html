<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Smockron - Distributed Rate Limiting</title>
  <link rel="stylesheet" type="text/css" href="css/fonts.css">
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="css/site.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <link rel="stylesheet" href="css/hljs.css" type="text/css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <nav class="navbar navbar-default navbar-static-top" role="navigation">
    <ul class="nav navbar-nav">
      <li><a href="/">Smockron!</a></li>
      <li><a href="http://github.com/arodland/smockron"><span class="fa fa-github"></span> GitHub</a></li>
      <li><a href="ihttps://www.npmjs.org/package/smockron"><span class="fa fa-code"></span> NPM</a></li>
      <li><a href="http://github.com/arodland/smockron/issues"><span class="fa fa-bug"></span> Bugs</a></li>
      <li><a href="http://github.com/arodland/smockron/wiki"><span class="fa fa-book"></span> Wiki</a></li>
    </ul>
  </nav>
  <div class="hero">
    <h1>Smockron!</h1>
    <h4>Distributed Rate Limiting via Nginx Plugin or Node Middleware</h4>
    <h5>(Shut people down when they've made too many HTTP requests)</h5>
    <hr>
      <img src="images/smockron_workflow.png"> 
    <hr>
  </div>


  <div class="container value">
    <span class="col-md-4">
      <h4>Fail-safe</h3>
      <p>In the case of server or network outages, Smockron makes sure your application stays accessible.
      Distributed design doesn't add a single point of failure.</p>
    </span>
    <span class="col-md-4">
      <h4>Lightweight</h3>
      <p>Smockron uses minimal resources, and causes virtually no slowdown for users who aren't being throttled.</p>
    </span>
    <span class="col-md-4">
      <h4>Flexible</h3>
      <p>Smockron works no matter what language your application is written in, or what technology you use for
      load-balancing.</p>
    </span>
  </div>

  <hr>

  <section class="container">
    <h3>Getting the code</h3>
    <p>Install from NPM:
    <pre><code class="language-bash">$ npm install smockron</code></pre>

    <p>Or check it out from <a href="https://github.com/arodland/smockron">GitHub</a>:</p>
    <pre><code class="language-bash">$ git clone https://github.com/arodland/smockron
$ git submodule update --init
$ npm install</code></pre>
  </section>

  <hr>

  <section class="container">
    <h3>Master</h3>
    <p>
    The master aggregates request counts and notifies app servers when thresholds are met.
    <p>
    Configure rate limiting criteria and thresholds:
    <pre><code class="language-bash">$ vi config/default.yaml</code></pre>

    Start up the master:
    <pre><code class="language-bash">$ smockron_master
# or: node bin/master.js</code></pre>
  </section>

  <hr>

  <section class="container">
    <h3>Express middleware</h3>
    <p>
    App middleware sends events to the master and listens for throttle notifiactions.  Use either this middleware, or the Nginx module below.
    <p>
    Configure your application:
    <pre><code>var Smockron = require('smockron');
var gk = new Smockron.Gatekeeper({
  server: "smockron.example.com",
  domain: "myapp",
  identifierCB: Smockron.Gatekeeper.REMOTE_ADDR
});
app.use(gk.middleware());</code></pre>

    Or run the example app:
    <pre><code class="language-bash">$ node bin/gatekeeper_test.js</code></pre>
  </section>

  <hr>

  <section class="container">
    <h3>Nginx module</h3>
    <p>
    If you'd rather limit at the nginx level, use the nginx module instead of the Node middleware.  The nginx module sends events to the master and listens for throttle notifiactions. 
    <p>
    Download and unpack <a href="http://wiki.nginx.org/">nginx</a>:
    <pre><code class="language-bash">$ cd smockron/gatekeeper/nginx-module
$ ./configure-nginx /path/to/nginx
$ ./build-nginx /path/to/nginx</code></pre>

    Add configuration in nginx.conf:
    <pre><code class="language-bash">$ smockron on;
$ smockron_master tcp://smockron.example.com:10004;
$ smockron_domain myapp;</code></pre>

    Run the example config:
    <pre><code class="language-bash">$ ./run-nginx /path/to/nginx</code></pre>
  </section>

  <hr>

  <section class="container about">

    <h3>About Smockron</h3>

    <h4>How does it work?</h4>
    <p>Application servers use <a href="http://zeromq.org/">ZeroMQ</a> to send information about incoming requests to a Smockron master server. When the master detects that a client is accessing a resource too frequently, it sends a message to servers with that resource instructing them to deny that client for a period of time.
    <p>For more information about the design of Smockron, see the <a href="https://github.com/arodland/smockron/wiki/Design">Smockron design documentation</a>.

    <h4>What do I need?</h4>
    <p>The Smockron master is written in <a href="http://nodejs.org/">Node</a> and uses <a href="http://redis.io/">Redis</a> as a data store.  The Smockron gatekeeper exists in two versions: as a Node <a href="http://expressjs.com/">Express</a> middleware, and as an <a href="http://wiki.nginx.org/">Nginx</a> plugin.

    <h4>Is it ready to use?</h4>
    <p>Smockron is beta software under active development. It's not ready for production use quite yet. All of the components have a basic set of features and are reasonably stable, and you're encouraged to try it out and share your experiences.

  </section>

  <footer class="site-footer">
      Smockron &copy; 2013-2014 Andrew Rodland. Inspiration and support provided by <a
        href="http://code.shutterstock.com/">Shutterstock</a>.
  </footer>

  <script type="text/javascript" src="http://cleverdomain.org:8000/lilbro.min.js"></script>
  <script type="text/javascript">
  var lilBro = new LilBro({
    element: document.body,
    server: 'cleverdomain.org:8000',
    track_focus: false
  });
  lilBro.write({event_type: 'page_load'});
  </script>
  <script src="js/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
