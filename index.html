<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Smockron - Distributed Rate Limiting</title>
  <link rel="stylesheet" type="text/css" href="css/fonts.css">
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="css/site.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <link rel="stylesheet" href="css/hljs.css" type="text/css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <nav class="navbar navbar-default navbar-static-top" role="navigation">
    <ul class="nav navbar-nav">
      <li><a href="/">Smockron!</a></li>
      <li><a href="http://github.com/arodland/smockron"><span class="fa fa-code"></span> GitHub</a></li>
      <li><a href="http://github.com/arodland/smockron/issues"><span class="fa fa-bug"></span> Bugs</a></li>
      <li><a href="http://github.com/arodland/smockron/wiki"><span class="fa fa-book"></span> Wiki</a></li>
    </ul>
  </nav>
  <div class="hero">
    <h1>Smockron!</h1>
    <h4>Distributed Rate Limiting via Nginx Plugin or Node Middleware</h4>
    <h5>(Shut people down when they've made too many HTTP requests)</h5>
    <hr>
      <img src="/images/smockron_workflow.png"> 
    <hr>
  </div>


  <div class="container">
    <span class="col-md-4">
      <h3>Fail-safe</h3>
      <p>In the case of server or network outages, Smockron makes sure your application stays accessible.
      Distributed design doesn't add a single point of failure.</p>
    </span>
    <span class="col-md-4">
      <h3>Lightweight</h3>
      <p>Smockron uses minimal resources, and causes virtually no slowdown for users who aren't being throttled.</p>
    </span>
    <span class="col-md-4">
      <h3>Flexible</h3>
      <p>Smockron works no matter what language your application is written in, or what technology you use for
      load-balancing.</p>
    </span>
  </div>

  <hr>

  <section class="container">
    <h3>Getting the code</h3>
    <p>Check it out from <a href="https://github.com/arodland/smockron">GitHub</a>:</p>
    <pre><code class="language-bash">git clone https://github.com/arodland/smockron</code></pre>
  </section>

  <hr>

  <section class="container">
    <h3>Master</h3>
    <p>
    The master aggregates request counts and notifies app servers when thresholds are met.
    <p>
    Install dependencies:
    <pre><code class="language-bash">$ cd smockron/master
$ npm install</code></pre>

    Configure rate limiting criteria and thresholds:
    <pre><code class="language-bash">$ vi config/default.yaml</code></pre>

    Start up the master:
    <pre><code class="language-bash">$ node bin/master.js</code></pre>
  </section>

  <hr>

  <section class="container">
    <h3>Express middleware</h3>
    <p>
    App middleware sends events to the master and listens for throttle notifiactions.  Use either this middleware, or the Nginx module below.
    <p>
    Install dependencies:
    <pre><code class="language-bash">$ cd smockron/gatekeeper/node-middleware
$ npm install</code></pre>

    Configure your application:
    <pre><code class="language-bash">var Smockron = require('smockron');
var smockron = new Smockron({
  server: "smockron.example.com",
  domain: "myapp",
  identifierCB: Smockron.REMOTE_ADDR
});
app.use(smockron.middleware());</code></pre>

    Run the example app:
    <pre><code class="language-bash">$ node test.js</code></pre>
  </section>

  <hr>

  <section class="container">
    <h3>Nginx module</h3>
    <p>
    The nginx module sends events to the master and listens for throttle notifiactions.  Use either this Nginx module, or the Express middleware above.
    <p>
    Download and unpack <a href="http://wiki.nginx.org/">nginx</a>:
    <pre><code class="language-bash">$ cd smockron/gatekeeper/nginx-module
$ ./configure-nginx /path/to/nginx
$ ./build-nginx /path/to/nginx</code></pre>

    Add configuration in nginx.conf:
    <pre><code class="language-bash">$ smockron on
$ smockron_server smockron.example.com
$ smockron_domain myapp</code></pre>

    Run the example config:
    <pre><code class="language-bash">$ ./run-nginx /path/to/nginx</code></pre>
  </section>

  <footer class="site-footer">
      Smockron &copy; 2013-2014 Andrew Rodland. Inspiration and support provided by <a
        href="http://code.shutterstock.com/">Shutterstock</a>.
  </footer>

  <script type="text/javascript" src="http://cleverdomain.org:8000/lilbro.min.js"></script>
  <script type="text/javascript">
  var lilBro = new LilBro({
    element: document.body,
    server: 'cleverdomain.org:8000',
    track_focus: false
  });
  lilBro.write({event_type: 'page_load'});
  </script>
  <script src="/js/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
